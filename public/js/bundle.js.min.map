{"version":3,"sources":["form.js"],"names":["document","addEventListener","formulario","agregarEstados","paso","console","log","querySelectorAll","forEach","btn","e","target","dataset","mostrarSeccion","seccionMostrar","querySelector","btnActual","click","seccionAnt","classList","remove","add","async","respuesta","fetch","datos","json","peticion","resultado","padre","estado","opcion","createElement","textContent","value","normalize","replace","toLowerCase","split","join","appendChild","colcocarMunicipios","municipios","innerHTML","municipio"],"mappings":"AAAAA,SAAAC,iBAAA,mBAAA,KACAC,aACAC,mBAIA,IAAAC,KAAA,EACA,SAAAF,aACAG,QAAAC,IAAA,SACAN,SAAAO,iBAAA,QAEAC,QAAAC,IAEAA,EAAAR,iBAAA,QAAAS,IAEAN,KAAAM,EAAAC,OAAAC,QAAAR,KACAS,qBAIA,SAAAA,iBACA,MAAAC,EAAAd,SAAAe,cAAA,SAAAX,MAEAY,EAAAhB,SAAAe,cAAA,cAEAE,EAAAjB,SAAAe,cAAA,eAAAX,UAEAc,EAAAlB,SAAAe,cAAA,YACAG,IACAA,EAAAC,UAAAC,OAAA,WACAF,EAAAC,UAAAE,IAAA,YAEAP,EAAAK,UAAAE,IAAA,WACAP,EAAAK,UAAAC,OAAA,WAGAJ,EAAAG,UAAAC,OAAA,aACAH,EAAAE,UAAAE,IAAA,aAEAC,eAAAnB,iBAEA,MACAoB,QAAAC,MADA,WAEAC,QAAAF,EAAAG,OAGAC,QAAAH,MADA,sBAEAI,QAAAD,EAAAD,OAEA1B,SAAAO,iBAAA,YACAC,QAAAqB,IAEAJ,EAAAjB,QAAAsB,IACA,MAAAC,EAAA/B,SAAAgC,cAAA,UACAD,EAAAE,YAAAH,EACAC,EAAAG,MAAAJ,EACAK,UAAA,OACAC,QAAA,mBAAA,IACAC,cACAC,MAAA,KACAC,KAAA,KACAV,EAAAW,YAAAT,KAIAF,EAAA5B,iBAAA,SAAAS,GACA+B,mBAAAb,EAAAlB,EAAAC,OAAAuB,WAaAZ,eAAAmB,mBAAAC,GAEA1C,SAAAO,iBAAA,cAEAC,QAAAqB,IAEAA,EAAAc,UAAA,wDACAD,EAAAlC,QAAAoC,IAGA,MAAAb,EAAA/B,SAAAgC,cAAA,UAEAD,EAAAE,YAAAW,EAGAb,EAAAG,MAAAU,EAAAP,cAAAC,MAAA,KAAAC,KAAA,KAGAV,EAAAW,YAAAT","file":"bundle.js","sourcesContent":["document.addEventListener(\"DOMContentLoaded\", () => {\r\n  formulario();\r\n  agregarEstados();\r\n});\r\n\r\n//funcion para ocultar y mostrar partes del formulario\r\nlet paso = 1;\r\nfunction formulario() {\r\n  console.log(\"adios\");\r\n  const botones = document.querySelectorAll(\".btn\");\r\n\r\n  botones.forEach((btn) => {\r\n    //A cada btn le agregamos el evento de click\r\n    btn.addEventListener(\"click\", (e) => {\r\n      //Seleccionamos el paso para cambiar seccion\r\n      paso = e.target.dataset.paso;\r\n      mostrarSeccion();\r\n    });\r\n  });\r\n}\r\nfunction mostrarSeccion() {\r\n  const seccionMostrar = document.querySelector(`#paso-${paso}`);\r\n  //btn a resaltar\r\n  const btnActual = document.querySelector(\".btnActual\");\r\n  //btn al que se le dio click\r\n  const click = document.querySelector(`[data-paso=\"${paso}\"]`);\r\n  //Seleccionamos el que se mostraba y lo ocultamos\r\n  const seccionAnt = document.querySelector(\".mostrar\");\r\n  if (seccionAnt) {\r\n    seccionAnt.classList.remove(\"mostrar\");\r\n    seccionAnt.classList.add(\"ocultar\");\r\n  }\r\n  seccionMostrar.classList.add(\"mostrar\");\r\n  seccionMostrar.classList.remove(\"ocultar\");\r\n\r\n  //Resaltar btn\r\n  btnActual.classList.remove(\"btnActual\");\r\n  click.classList.add(\"btnActual\");\r\n}\r\nasync function agregarEstados() {\r\n  //Pedimos los estados\r\n  const url = \"/mexico\";\r\n  const respuesta = await fetch(url);\r\n  const datos = await respuesta.json();\r\n  //consulta a los municipios\r\n  const urlMunicipios = \"/mexico/municipios\";\r\n  const peticion = await fetch(urlMunicipios);\r\n  const resultado = await peticion.json();\r\n  //Seleccionamos los select\r\n  const padres = document.querySelectorAll(\".entidad\");\r\n  padres.forEach((padre) => {\r\n    //Cada padre tendra los estados\r\n    datos.forEach((estado) => {\r\n      const opcion = document.createElement(\"OPTION\");\r\n      opcion.textContent = estado;\r\n      opcion.value = estado\r\n        .normalize(\"NFD\")\r\n        .replace(/[\\u0300-\\u036f]/g, \"\")\r\n        .toLowerCase()\r\n        .split(\" \")\r\n        .join(\"_\");\r\n      padre.appendChild(opcion);\r\n\r\n    });\r\n     //Aparecer lso municipios\r\n     padre.addEventListener(\"change\", (e) =>\r\n     colcocarMunicipios(resultado[e.target.value])\r\n   );\r\n  });\r\n  /*\r\ndatos.forEach(estado =>{\r\n    const opcion = document.createElement('OPTION');\r\n    opcion.textContent = estado;\r\n    opcion.value = estado.normalize('NFD').replace(/[\\u0300-\\u036f]/g, '').toLowerCase().split(' ').join('_');\r\n    padre.appendChild(opcion);\r\n\r\n});\r\n*/\r\n}\r\nasync function colcocarMunicipios(municipios) {\r\n  //El padre es el contenedor de los option\r\n  const padres = document.querySelectorAll(\".municipio\");\r\n\r\n  padres.forEach((padre) => {\r\n    //Limpiamos al padre\r\n    padre.innerHTML = \"<option disbaled>---Seleccione una opción---</option>\";\r\n    municipios.forEach((municipio) => {\r\n      //Limpiamos al padre\r\n      //se crea una etiqueta de option\r\n      const opcion = document.createElement(\"OPTION\");\r\n      //de texto le añadimos el nombre del municipio\r\n      opcion.textContent = municipio;\r\n\r\n      //el valor que se envia a la db\r\n      opcion.value = municipio.toLowerCase().split(\" \").join(\"_\");\r\n\r\n      //Lo agregamos en el padre\r\n      padre.appendChild(opcion);\r\n    });\r\n  });\r\n}\r\n"]}